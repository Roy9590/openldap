# Master Makefile for OpenLDAP
# Copyright 1998 The OpenLDAP Foundation,  All Rights Reserved.
# COPYING RESTRICTIONS APPLY, See COPYRIGHT file

SUBDIRS= include libraries clients servers # contrib
CLEANDIRS= tests
INSTALLDIRS= doc

makefiles:	FORCE
	./config.status

${srcdir}/configure: configure.in aclocal.m4
	cd ${srcdir} && autoconf

# autoheader might not change portable.h.in, so touch a stamp file
${srcdir}/include/portable.h.in:	stamp-h.in
${srcdir}/stamp-h.in: configure.in aclocal.m4 acconfig.h \
	${srcdir}/include/portable.h.top ${srcdir}/include/portable.h.bot	
	cd ${srcdir} && autoheader
	@echo timestamp > ${srcdir}/stamp-h.in

./include/portable.h: stamp-h
stamp-h: config.h.in config.status
	./config.status

Makefile: Makefile.in config.status
	./config.status

config.status: configure
	./config.status --recheck

