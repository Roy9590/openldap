#!/bin/sh

echo ">>>>> Executing all LDAP tests..."

if [ $# -eq 0 ]; then
	SRCDIR="."
else
	SRCDIR=$1; shift
fi

echo ">>>>> Test Directory: $SRCDIR"

for CMD in $SRCDIR/scripts/test*; do
	echo ">>>>> Starting `basename $CMD` ..."
	$CMD $SRCDIR
	RC=$?
	if [ $RC -eq 0 ]; then
		echo ">>>>> $CMD completed OK."
	else
		echo ">>>>> $CMD failed (exit $RC)"
		exit $RC
	fi
	echo ">>>>> waiting 5 seconds for things to exit"
	sleep 5
	echo
done
