Making and Installing the OpenLDAP Distribution

** It is recommended that you read or at least skim through ALL of the
** instructions in this file before attempting to build the software.

If you want to build binaries for more than one platform from a single
source tree, skip ahead to the "Building LDAP For More Than One Platform"
section near the end of this file.

If you simply want to build LDAP for a single machine platform, follow
these steps:

 1. untar the distribution and cd to the top:

	% tar xfz openldap-VERSION.tgz
	% cd ldap

    If you are reading this file, you probably have already done this!

 2. Type:
	% ./configure --help

	to list available configuration options.   A description of
	these options is provided in the 'CONFIGURE OPTIONS' section
	below.

	The configure script will also use your environmental
	variables for determining compiler/linker options.

	These environment variables are used: 
		CC			C Compiler	(cc, ecgs)
		CFLAGS		C Flags		(-ansi)
		CPPFLAGS	CPP Flags	(-I/path/include -Ddef)
		LDFLAGS		LDFLAGS		(-L/path/lib -llib)

	A list of defines and other options are noted in the
	'DEFINES and FLAGS' comments below.

 3. edit the file include/ldapconfig.h.edit to configure
    the software for your site (the files are well-commented):

	% vi include/ldapconfig.h.edit

 4. Configure the build system

	% [env settings] ./configure [options]

	If all goes well, the configure script with auto-detect the
	appropriate settings.  Use configure enable/with options and/or
	environment variables to obtain desired results.

 5. Build dependencies

	% make depend

 6. Build the system

	% make

    If all goes well, the system will build as configured.  If not,
	return to step 4 after reviewing the enable/with options settings.
	
 7. install the binaries and man pages.  You may need to be superuser to
    do this (depending on where you are installing things):

	% su
	# make install

    That's it!  See the man pages for the individual clients for information
    on configuring and using them.  Eventually you will probably want to
    edit the configuration files used by the various clients (installed in
    the LDAP etc directory).  The files are:

	ldapfilter.conf      - search filter configuration
	ldapfriendly         - mapping of X.500 names to human-friendly names
	ldapsearchprefs.conf - search object definitions
	ldaptemplates.conf   - display template definitions

    There are section 5 man pages for all of these files.


Building LDAP For More Than One Platform

It is now possible to build LDAP for more than one platform from the same
source tree.  This is accomplished by using make(1) VPATH support.  If
your make(1) program is old and doesn't have VPATH support, install GNU
Make.

Follow these steps for each different platform:

 1.	Create a directory for the platform object files.

	% mkdir obj-platform

 2. Change your working directory to the platform object directory.

	% cd obj-platform

 3. Configure the build system

	% [env settings] ../configure --src-dir=.. [options]

		( replace ".." with the appropriate path )

 4. Continue as above (starting at step 6).

	Note: make depend in VPATH environment is not yet supported.


CONFIGURE OPTIONS

Regrettably, this section has not been written (yet).  See
"./configure --help" for current list of options.


DEFINES and FLAGS

The configure script will also use your environmental
variables for determining compiler/linker options.   This can
be used to manual specify features and compilation options.

Supported Environmental Variables
	CC			C Compiler	(cc, ecgs)
	CFLAGS		C Flags		(-ansi)
	CPPFLAGS	CPP Flags	(-I/path/include -Ddef)
	LDFLAGS		LDFLAGS		(-L/path/lib -llib)

End of OpenLDAP INSTALL file.
