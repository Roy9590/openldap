# $OpenLDAP$

SRCS=	main.c find.c mod.c print.c auth.c util.c help.c \
	group.c edit.c globals.c
XSRCS= version.c
OBJS=	main.o find.o mod.o print.o auth.o util.o help.o \
	group.o globals.o edit.o
HDRS=	ud.h

UNIX_PRGS = ud
PROGRAMS = $(@PLAT@_PRGS)

LDAP_INCDIR= ../../include       
LDAP_LIBDIR= ../../libraries

XLIBS =  -llutil -lldif -lldap -llber
XXLIBS	= $(TERMCAP_LIBS) $(SECURITY_LIBS) $(LDIF_LIBS) $(LUTIL_LIBS)

ud : version.o
	$(LTLINK) -o $@ version.o $(OBJS) $(LIBS)

version.c: ${OBJS} $(LDAP_LIBDEPEND)
	@-$(RM) $@
	$(MKVERSION) -s -c -n Version UserDirectory > $@

install-local: FORCE
	-$(MKDIR) $(DESTDIR)$(bindir)
	-mv -f $(DESTDIR)$(bindir)/ud $(DESTDIR)$(bindir)/ud-
	@(								\
	    for prg in $(PROGRAMS); do					\
		$(LTINSTALL) $(INSTALLFLAGS) -s -m 755 $$prg$(EXEEXT)	\
		    $(DESTDIR)$(bindir);				\
	    done							\
	)

