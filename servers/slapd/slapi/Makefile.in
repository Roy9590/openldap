## Copyright 1998-2003 The OpenLDAP Foundation, All Rights Reserved.
## COPYING RESTRICTIONS APPLY, see COPYRIGHT file

## Copyright IBM Corp. 1997,2002
## Use of this source code is subject to the terms of The OpenLDAP Public 
## License Version 2.7, 7 September 2001.
## No trademarks of the IBM Corporation are to be used to identify, endorse 
## or promote  any products derived from this code without the prior 
## written consent of IBM 

LIBRARY = libslapi.la
#XLIBRARY = libtmpslapd.a

#all-common: $(LIBRARY) $(PROGRAMS)
#	@touch plugin.c slapi_pblock.c slapi_utils.c slapi_ops.c

NT_SRCS = nt_err.c
NT_OBJS = nt_err.lo

LIB_DEFS = -DSLAPI_LIBRARY

SRCS=  plugin.c slapi_pblock.c slapi_utils.c printmsg.c slapi_ops.c \
	$(@PLAT@_SRCS)
OBJS=  plugin.lo slapi_pblock.lo slapi_utils.lo printmsg.lo slapi_ops.lo \
	$(@PLAT@_SRCS)

XSRCS= version.c

LDAP_INCDIR= ../../../include -I.. -I.       
LDAP_LIBDIR= ../../../libraries       

XLIBS = $(LIBRARY)
XXLIBS = 
NT_LINK_LIBS = $(AC_LIBS)

XINCPATH = -I$(srcdir)/.. -I$(srcdir)
XDEFS = $(MODULES_CPPFLAGS)

#UNIX_LINK_LIBS = ./libtmpslapd.a ../libbackends.a ../../../libraries/libavl/libavl.a ../../../libraries/liblber/.libs/liblber.a ../../../libraries/libldbm/libldbm.a ../../../libraries/libldif/libldif.a ../../../libraries/liblutil/liblutil.a ../../../libraries/liblunicode/liblunicode.a ../../../libraries/libldap_r/.libs/libldap_r.a ./libtmpslapd.a

BUILD_MOD = @BUILD_SLAPI@

install-local: FORCE
	if test "$(BUILD_MOD)" = "yes"; then \
		$(MKDIR) $(DESTDIR)$(libdir); \
		$(LTINSTALL) $(INSTALLFLAGS) -m 644 $(LIBRARY) $(DESTDIR)$(libdir); \
	fi

