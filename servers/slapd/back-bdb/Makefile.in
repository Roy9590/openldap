# $OpenLDAP$

SRCS = init.c tools.c config.c \
	add.c bind.c compare.c delete.c modify.c modrdn.c search.c \
	extended.c passwd.c referral.c \
	dn2entry.lo dn2id.c error.c id2entry.c idl.c nextid.c
OBJS = init.lo tools.lo config.lo \
	add.lo bind.lo compare.lo delete.lo modify.lo modrdn.lo search.lo \
	extended.lo passwd.lo referral.lo \
	dn2entry.lo dn2id.lo error.lo id2entry.lo idl.lo nextid.lo

LDAP_INCDIR= ../../../include       
LDAP_LIBDIR= ../../../libraries

BUILD_OPT = "--enable-bdb"
BUILD_MOD = @BUILD_BDB@
LINKAGE = @BUILD_BDB_DYNAMIC@

DYN_DEFS = -DLBER_DECL=dllimport -DLDAP_DECL=dllimport

# TODO
#NT_mod_DYN_MODDEFS	=
#NT_mod_STAT_MODDEFS	=

NT_yes_DYN_MODDEFS	= $(DYN_DEFS)
NT_yes_STAT_MODDEFS	=

MODDEFS = $(@PLAT@_@BUILD_LDBM@_@LIB_LINKAGE@_MODDEFS)

LIBBASE = back_bdb

XINCPATH = -I.. -I$(srcdir)/..
XDEFS = $(MODULES_CPPFLAGS)

all-local-lib:	../.backend

../.backend: lib$(LIBBASE).a
	@touch $@

